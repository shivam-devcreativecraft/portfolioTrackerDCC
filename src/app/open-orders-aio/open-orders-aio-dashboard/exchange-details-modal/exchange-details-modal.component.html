<div cdkDrag cdkDragRootElement=".cdk-overlay-pane" class="exchange_details_modal">
    <div mat-dialog-title cdkDragHandle>
        <h1>{{data.exchange}}<br>
            <p class="mb-0" style='font-size: 10px; margin-top:-6px'>Exchange Details</p>
        </h1>
    </div>

    <div mat-dialog-content class="content">
        <div class="py-2"></div>

        <div class="details-grid">
            <div class="detail-row">
                <div class="detail-item">
                    <label>Invested Value</label>
                    <div class="value">₮ {{data.exchangeData?.TotalInvested | number:'1.2-2'}}</div>
                </div>
                <div class="detail-item">
                    <label>Current Value</label>
                    <div class="value" [ngClass]="{'text-success': data.exchangeData?.TotalCurrentValue > data.exchangeData?.TotalInvested, 'text-danger': data.exchangeData?.TotalCurrentValue < data.exchangeData?.TotalInvested}">
                        ₮ {{data.exchangeData?.TotalCurrentValue | number:'1.2-2'}}
                    </div>
                </div>
            </div>

            <div class="detail-row">
                <div class="detail-item">
                    <label>Returns Value</label>
                    <div class="value" [ngClass]="{'text-success': data.exchangeData?.TotalExpectedReturn > data.exchangeData?.TotalInvested, 'text-danger': data.exchangeData?.TotalExpectedReturn <= data.exchangeData?.TotalInvested}">
                        ₮ {{data.exchangeData?.TotalExpectedReturn | number:'1.2-2'}}
                    </div>
                </div>
                <div class="detail-item">
                    <label>Seed Money</label>
                    <div class="value">₮ {{data.exchangeData?.TotalSeedMoney | number:'1.2-2'}}</div>
                </div>
            </div>

            <div class="detail-row">
                <div class="detail-item">
                    <label>Retrieved Seed</label>
                    <div class="value" [ngClass]="{'text-success': data.exchangeData?.TotalRetrievedSeedMoney >= data.exchangeData?.TotalSeedMoney, 'text-danger': data.exchangeData?.TotalRetrievedSeedMoney < data.exchangeData?.TotalSeedMoney}">
                        ₮ {{data.exchangeData?.TotalRetrievedSeedMoney | number:'1.2-2'}}
                    </div>
                </div>
                <div class="detail-item">
                    <label>Pending Seed</label>
                    <div class="value" [ngClass]="{'text-danger': (data.exchangeData?.TotalSeedMoney - data.exchangeData?.TotalRetrievedSeedMoney) > 0, 'text-success': (data.exchangeData?.TotalSeedMoney - data.exchangeData?.TotalRetrievedSeedMoney) <= 0}">
                        ₮ {{(data.exchangeData?.TotalSeedMoney - data.exchangeData?.TotalRetrievedSeedMoney) | number:'1.2-2'}}
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="detail-item">
                    <label>Until Targeted Value</label>
                    <div class="value" [ngClass]="{'text-success': (data.exchangeData?.TotalCurrentValue - data.exchangeData?.TotalInvested) >= data.exchangeData?.TotalExpectedPnl, 'text-danger': (data.exchangeData?.TotalCurrentValue - data.exchangeData?.TotalInvested) < data.exchangeData?.TotalExpectedPnl}">
                        ₮ {{((data.exchangeData?.TotalCurrentValue - data.exchangeData?.TotalInvested) - data.exchangeData?.TotalExpectedPnl) | number:'1.2-2'}}
                    </div>
                </div>
            </div>
        </div>

        <div class="pnl-section"
            [ngClass]="{'positive': data.exchangeData?.TotalCurrentValue > data.exchangeData?.TotalInvested, 'negative': data.exchangeData?.TotalCurrentValue < data.exchangeData?.TotalInvested}">
            <label>Current P/L</label>
            <div class="pnl-value"
                [ngClass]="{'positive': data.exchangeData?.TotalCurrentValue > data.exchangeData?.TotalInvested, 'negative': data.exchangeData?.TotalCurrentValue < data.exchangeData?.TotalInvested}">
                ₮ {{(data.exchangeData?.TotalCurrentValue - data.exchangeData?.TotalInvested) | number:'1.2-2'}}
                <span class="percentage">({{((data.exchangeData?.TotalCurrentValue - data.exchangeData?.TotalInvested) /
                    data.exchangeData?.TotalInvested * 100) | number:'1.2-2'}}%)</span>
            </div>
        </div>

        <div class="additional-info">
            <div class="info-row">
                <label>Expected Returns</label>
                <div class="value" [ngClass]="{'text-success': data.exchangeData?.TotalExpectedReturn > data.exchangeData?.TotalInvested, 'text-danger': data.exchangeData?.TotalExpectedReturn <= data.exchangeData?.TotalInvested}">
                    {{((data.exchangeData?.TotalExpectedReturn - data.exchangeData?.TotalInvested) / data.exchangeData?.TotalInvested * 100) | number:'1.2-2'}}%
                </div>
            </div>

            <div class="info-row">
                <label>Until Target Progress</label>
                <div class="value" [ngClass]="{'text-success': (data.exchangeData?.TotalCurrentValue - data.exchangeData?.TotalInvested) >= data.exchangeData?.TotalExpectedPnl, 'text-danger': (data.exchangeData?.TotalCurrentValue - data.exchangeData?.TotalInvested) < data.exchangeData?.TotalExpectedPnl}">
                    {{(((data.exchangeData?.TotalCurrentValue - data.exchangeData?.TotalInvested) - data.exchangeData?.TotalExpectedPnl) / data.exchangeData?.TotalExpectedPnl * 100) | number:'1.2-2'}}%
                </div>
            </div>

            <div class="info-row">
                <label>Retrieved Seed Progress</label>
                <div class="value" [ngClass]="{'text-success': data.exchangeData?.TotalRetrievedSeedMoney >= data.exchangeData?.TotalSeedMoney, 'text-danger': data.exchangeData?.TotalRetrievedSeedMoney < data.exchangeData?.TotalSeedMoney}">
                    {{(data.exchangeData?.TotalRetrievedSeedMoney / data.exchangeData?.TotalSeedMoney * 100) | number:'1.2-2'}}%
                </div>
            </div>
        </div>
    </div>

    <div mat-dialog-actions class="action d-flex">
        <button mat-raised-button color="warn" (click)="onClose()" tabIndex="-1">Close</button>
    </div>
</div>