<div class="total-stats-div p-3 mt-3" >

  <h1 class="box-title" style="colorr : #f7a600; " [matBadge]="columnTotals.Executed_Events" matBadgePosition="after"
    matBadgeColor="accent">Executed Events</h1>
  <div class="loader-div  d-flex justify-content-center align-items-center flex-column"
    *ngIf="!IsSelectedSheetDataLoaded">
    <div class="spinner-border" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
    <span class="pt-2">Loading ...</span>


  </div>


  <div class="row" *ngIf="IsSelectedSheetDataLoaded">
    <div class="col-lg-6 col-12  pb-2 d-flex justify-content-between align-items-start flex-column">
      <div class="card p-0" style="width: 100%">
        <div class="card-body">
          <h2 class="card-title">Invested</h2>
          <h1 class="px-3 card-text text-success" style="font-weight: 600;">
            {{ columnTotals.Invested_BTC_Executed}}
          </h1>
        </div>
      </div>
    </div>
    <div class="col-lg-6 col-12  pb-2 d-flex justify-content-between align-items-start flex-column">
      <div class="card p-0" style="width: 100%">
        <div class="card-body">
          <h2 class="card-title">Return</h2>
          <h1 class="px-3 card-text text-success" style="font-weight: 600;">
            {{ columnTotals.Won_BTC_Executed }} | <mat-icon>trending_up</mat-icon>
            {{columnTotals.Won_BTC_Executed-columnTotals.Invested_BTC_Executed}}
          </h1>
        </div>
      </div>
    </div>

  </div>



</div>
<div class="spacer-20"></div>
<div class="total-stats-div p-3 mt-3" >

  <h1 class="box-title" style="colorr : #f7a600" [matBadge]="sheetData.length" matBadgePosition="after"
    matBadgeColor="accent">All Events</h1>
  <div class="loader-div  d-flex justify-content-center align-items-center flex-column"
    *ngIf="!IsSelectedSheetDataLoaded">
    <div class="spinner-border" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
    <span class="pt-2">Loading ...</span>


  </div>
  <!-- <div class="row border" *ngIf="IsSelectedSheetDataLoaded">
    <h1 class="mb-0 py-3" style="color : #f7a600">Trading Pairs</h1>
    <div class="col-lg-6 col-12  pb-2 d-flex justify-content-between align-items-start flex-column " *ngFor="let item of tradingPairData">
      <div class="card  p-0" style="width: 100%">
        <div class="card-body" data-toggle="tooltip" data-placement="bottom" title="Fee include | Withdraw Excluded">
          <h2 class="card-title"> {{item.TradingPair}}</h2>
  
          <div class="border">
          <p class=" px-3 card-text text-success" style="font-weight: 600;">
            Invested : ₮ 
          {{item.TotalInvestedAmount | number:'1.0-2' }}
  
          </p>
          <p class=" px-3 card-text text-success" style="font-weight: 600;">
  
          Avg. Price : ₮ {{item.AverageBuyPrice | number:'1.0-3'}}
        </p>
        <p class=" px-3 card-text text-success" style="font-weight: 600;">
  
          Quantity : {{item.TotalBuyQuantity}}
        </p>
        </div>
        </div>
      </div>
    </div>
    </div> -->

  <div class="row" *ngIf="IsSelectedSheetDataLoaded">



    <div class="col-lg-6 col-12  pb-2 d-flex justify-content-between align-items-start flex-column ">
      <div class="card  p-0" style="width: 100%">
        <div class="card-body   ">

          <h2 class="card-title">Invested</h2>

          <div class=" row">
            <div class="col-lg-46 col-6">


              <p class=" px-3  text-muted" style="font-weight: 600; ">
                Invested<br>



                <span class="card-text text-success" style="font-weight: 600;">{{columnTotals.Invested_BTC_All}}</span>

              </p>
            </div>
            <div class="col-lg-46 col-6">

              <p class=" px-3  text-muted" style="font-weight: 600; width: fit-content;"
                [matBadge]="columnTotals.Pending_Events" matBadgePosition="after" matBadgeColor="accent">
                Pending<br>



                <span class="card-text text-success"
                  style="font-weight: 600;">{{columnTotals.Pending_Return_BTC}}</span>

              </p>
            </div>
            <!-- <div class="col-lg-4 col-6">

          <p class=" px-3  text-muted" style="font-weight: 600; " >
            Quantity<br>
      


           <span class="card-text text-success" style="font-weight: 600;">   {{item.TotalBuyQuantity | number:'1.0-2' }}</span>
            
          </p>
        </div> -->

          </div>
        </div>
      </div>
    </div>


    <div class="col-lg-6 col-12  pb-2 d-flex justify-content-between align-items-start flex-column ">
      <div class="card  p-0" style="width: 100%">
        <div class="card-body">

          <h2 class="card-title">Returrn</h2>


          <div class=" row">
            <div class="col-lg-46 col-6">


              <p class=" px-3  text-muted" style="font-weight: 600; ">
                Return<br>



                <span class="card-text text-success" style="font-weight: 600;">{{columnTotals.Won_BTC_All}}</span>

              </p>
            </div>
            <div class="col-lg-46 col-6">

              <p class=" px-3  text-muted" style="font-weight: 600; width: fit-content;"
                [matBadge]="columnTotals.Pending_Events" matBadgePosition="after" matBadgeColor="accent">
                Pending<br>



                <span class="card-text text-success"
                  style="font-weight: 600;">{{columnTotals.Pending_Return_BTC}}</span>

              </p>
            </div>
            <!-- <div class="col-lg-4 col-6">

          <p class=" px-3  text-muted" style="font-weight: 600; " >
            Quantity<br>
      


           <span class="card-text text-success" style="font-weight: 600;">   {{item.TotalBuyQuantity | number:'1.0-2' }}</span>
            
          </p>
        </div> -->

          </div>
        </div>
      </div>
    </div>








  </div>

</div>
<div class="spacer-20"></div>



  <div class="history-div p-3 mt-3">
    <h1 class="box-title mb-0">Order History</h1>

  <mat-form-field appearance="outline" floatLabel="always" >

    <mat-label>Filter Table</mat-label>
    <input matInput (keyup)="applyFilter($event)" placeholder="Search" #input />
  </mat-form-field>

  <div style="overflow-x:  auto; " class="example-container">


    <ng-container class="table-div">
      <!-- trading-setup.component.html -->

      <div class="mat-elevation-z8 example-table-container">

        <table mat-table [dataSource]="dataSource" matSort matSortActive="Close_Date" matSortDirection="desc"
          class="mat-elevation-z8">

          <!-- Define columns -->

          <ng-container matColumnDef="Result">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Result </th>
            <td mat-cell *matCellDef="let element; ;  let index = index" style="font-weight: 600;">
              <span *ngIf="element.Result === 'WIN'">
                <mat-icon class="text-success" [matTooltip]="element.Result +' | '+ 
                    ((element.Return - element.Invested) | number:'1.0-8')
                    ">monetization_on</mat-icon>
              </span>
              <span *ngIf="element.Result === 'LOOSE'">
                <mat-icon class="text-danger"
                  [matTooltip]="element.Result + ' | '+(element.Invested|number:'1.0-8')">monetization_on</mat-icon>
              </span>
              <span
                *ngIf="element.Result !== 'WIN' && element.Result !== 'LOOSE' && (element.Result === '' || element.Result === 'null' || element.Result === 'undefined')">
                <mat-icon class="text-warning"
                  [matTooltip]="'Pending ' +' | '+(element.Invested |number:'1.0-8')">history</mat-icon>
              </span>
            </td>
          </ng-container>

          <ng-container matColumnDef="Remaining">
            <th mat-header-cell *matHeaderCellDef> Remaining </th>
            <td mat-cell *matCellDef="let element">
              <app-countdown-timer [closeDate]="element.Close_Date"></app-countdown-timer>
            </td>
          </ng-container>




          <ng-container matColumnDef="Open_Date">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Open_Date </th>
            <td mat-cell *matCellDef="let element" style="font-weight: 600;"> {{ element.Open_Date }} </td>
          </ng-container>
          <ng-container matColumnDef="Event">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Event </th>
            <td mat-cell *matCellDef="let element" style="font-weight: 600;" matTooltip="{{ element.Event }}">

              {{ element.Event | slice:0:5 }}... </td>
          </ng-container>
          <ng-container matColumnDef="Side">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Side </th>
            <td mat-cell *matCellDef="let element" style="font-weight: 600;" matTooltip="{{ element.Side }}"> {{
              element.Side | slice:0:5 }}... </td>
          </ng-container>


          <!-- <ng-container matColumnDef="Odds">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Odds </th>
                <td mat-cell *matCellDef="let element"
                style="font-weight: 600;"
              ><span *ngIf="element.Odds">
                {{ element.Odds }} 
              </span>
              <span *ngIf="!(element.Odds)">
                <mat-icon class="text-warning" [matTooltip]="'Pending'">history</mat-icon>
                
              </span>
            </td>

              </ng-container> -->
          <ng-container matColumnDef="Invested">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Invested </th>
            <td mat-cell *matCellDef="let element"> {{ element.Invested }} <span style="font-size:11px">

                SAT
              </span>
              <!-- > {{ element.Invested | eightDecimalPlace}} <span style="font-size:11px"> -->
            </td>
          </ng-container>
          <ng-container matColumnDef="Return">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Return </th>
            <td mat-cell *matCellDef="let element"> {{ element.Return }} <span style="font-size:11px"
                *ngIf="element.Return">
                SAT
              </span>
              <span *ngIf="!(element.Return) && element.Return!='0'">
                <mat-icon class="text-warning">history</mat-icon>

              </span>
            </td>
          </ng-container>





          <ng-container matColumnDef="Close_Date">
            <th mat-header-cell *matHeaderCellDef mat-sort-header> Close_Date </th>
            <td mat-cell *matCellDef="let element" style="font-weight: 600;"> {{ element.Close_Date }} </td>
          </ng-container>




          <!-- Actions column with Edit and Delete buttons -->
          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef> Actions </th>
            <td mat-cell *matCellDef="let element">
              <!-- <button mat-icon-button (click)="editItem(element.ID)">
                  <mat-icon class="text-warning">edit</mat-icon>
                </button> -->
              <button mat-icon-button (click)="deleteEntry(element.ID, element)">
                <mat-icon class="text-danger">delete</mat-icon>
              </button>


            </td>
          </ng-container>


          <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky:true"  class="table-header" >
          </tr>

          <tr mat-row *matRowDef="let row; columns: displayedColumns;let odd = odd; " [class.striped-row]="odd"></tr>

        </table>

        <!-- Pagination -->
        <div class="loader-div  d-flex justify-content-center align-items-center flex-column"
          *ngIf="!IsSelectedSheetDataLoaded">
          <div class="spinner-border" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        <span class="pt-2">Loading ...</span>


        </div>
      </div>
      <!-- <app-new></app-new> -->
    </ng-container>
  </div>
  <mat-paginator [pageSizeOptions]="[ 5, pageSizeOptions]" showFirstLastButtons></mat-paginator>
</div>